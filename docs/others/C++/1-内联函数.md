# 内联函数与引用变量

## 内联函数

内联函数是C++为提高程序运行速度所做的一项改进。常规函数和内联函数之间的主要区别不在于编
写方式，而在于C++编译器如何将它们组合到程序中。要了解内联函数与常规函数之间的区别，必须深入
到程序内部。

编译过程的最终产品是可执行程序——由一组机器语言指令组成。运行程序时，操作系统将这些指令载入到计算机内存中，因此每条指令都有特定的内存地址。计算机随后将逐步执行这些指令。有时（如有 循环或分支语句时)，将跳过一些指令，向前或向后跳到特定地址。常规函数调用也使程序跳到另一个地址 (函数的地址)，并在函数结束时返回。

C++内联函数提供了另一种选择。内联函数的编译代码与其他程序代码“内联”起来了。也就是说，编
译器将使用相应的函数代码替换函数调用。`对于内联代码，程序无需跳到另一个位置处执行代码，再跳回来。 因此，内联函数的运行速度比常规函数稍快，但代价是需要占用更多内存。`

```cpp
#include <iostream>

using namespace std;

inline double square(double x) {return x*x;}

int main()
{
	double a, b;
	double c = 13.0;
	a = square(5.0);
	b = (square(4.5+7.5))
	cout <<  a  << b;
}
```

尽管程序没有提供独立的原型，但C++原型特性仍在起作用。这是因为在函数首次使用前出现的整个函数定义充当了原型。这意味着可以给square()传递int或long值，将值传递给函数前，程序自动将这个 值强制转换为double类型。

## 引用变量

### 创建引用变量

C和C+使用&符号来指示变量的地址。C++给&符号赋予了另一个含义，将其用来声明引用。例如，要将rodents作为rats变量的别名，可以这样做：

```
int rats;
int &rodents = rats;
```

其中，&不是地址运算符，而是类型标识符的一部分。就像声明中的char*指的是指向char的指针一样， int&指的是指向int的引用。**上述引用声明允许将rats和rodents互换一它们指向相同的值和内存单元。**

### 引用作为函数参数

将引用作为函数的参数进行传递，可以在函数内修改外部的变量。在一个函数需要多个返回值的时候这种用法很好用，下面是一个小例子：

```cpp
#include <iostream>
using namespace std;

void swapr(int &x,int &y)
{
	int temp = y;
	y = x;
	x = temp;
}

int mian()
{
	int a = 1, b = 2;
	swapr(a, b);
	cout << a << " " << b;
}

Out: 2 1
```

### 什么时候使用引用参数

1. 程序员能够修改调用函数中的数据对象。
2. 通过传递引用而不是整个数据对象，可以提高程序的运行速度。





